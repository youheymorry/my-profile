(window.webpackJsonp=window.webpackJsonp||[]).push([[17,8,9,12,14],{1231:function(t,e,r){"use strict";r.r(e);var n=r(351),o=r(537),c=r(542),l=r(523),h=r(253),d=r(251),f=r(169),m=r(61),v=r(522),C=r(536),_=r(534),y=r(53),w=(r(124),r(16),r(22),r(58),r(67),r(791),r(362),r(66),r(45),r(926),r(783)),x=r(784),k=r(785),I=r(927),M=r.n(I),P=r(928),D=r.n(P),R=r(929),j=r.n(R),L=r(930),$=r.n(L),z=r(931),S=r.n(z),W=r(637),O=r(903),A=r(40);r(82);function F(t){return T.apply(this,arguments)}function T(){return(T=Object(y.a)(regeneratorRuntime.mark((function t(e){var r,n,o,c,l,image;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(A.a)(e.shape,2),n=r[0],o=r[1],t.next=3,O.f((function(){return O.a.toPixels(e)}));case 3:return c=t.sent,t.next=6,E(c,o,n);case 6:return l=t.sent,image=URL.createObjectURL(l),t.abrupt("return",{raw:c,blob:l,image:image});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e,r){return B.apply(this,arguments)}function B(){return(B=Object(y.a)(regeneratorRuntime.mark((function t(e,r,n){var o,canvas,c,l,data,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=Array.from(e),canvas=document.createElement("canvas"),c=canvas.getContext("2d"),canvas.width=r,canvas.height=n,l=c.createImageData(r,n),data=l.data,i=0;i<r*n*4;i+=1)data[i]=o[i];return c.putImageData(l,0,0),t.abrupt("return",this.getBlob(canvas));case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var N={name:"KAIPractice",data:function(){return{loading:!1,currentWidth:0,selectedImg:M.a,mlResultDialog:!1,imgItems:[{title:"Bird",icon:"mdi-bird",img:M.a},{title:"Dog1",icon:"mdi-dog",img:D.a},{title:"Dog2",icon:"mdi-dog",img:j.a},{title:"Cat1",icon:"mdi-cat",img:$.a},{title:"Cat2",icon:"mdi-cat",img:S.a}],mnistClassifier:null,mnistModelPath:"https://raw.githubusercontent.com/youheymorry/mnist_model_python/main/mnist_tfjs_keras/model.json",chartOptions:{title:{text:"MNIST Result",style:{color:"#007bff"}},plotOptions:{bar:{borderRadius:4,horizontal:!0}},xaxis:{categories:["0","1","2","3","4","5","6","7","8","9"],labels:{formatter:function(t){return t+"%"}}},yaxis:{min:0,max:100},theme:{mode:"dark"}},chartHeight:0,mnistResult:[0,0,0,0,0,0,0,0,0,0],cartoonModelPath:{hosoda:"https://raw.githubusercontent.com/leemengtaiwan/tfjs-models/master/cartoongan/tfjs_json_models/hosoda/model.json",miyazaki:"https://raw.githubusercontent.com/Derek-Wds/training_CartoonGAN/master/tfModels/Miyazaki/model.json"},hosodaModel:null,miyazakiModel:null}},computed:{imgClassifier:function(){return this.$store.state.mlModels.imgClassifier},modelLoadedProgress:function(){var t=[null===this.imgClassifier,null===this.mnistClassifier,null===this.hosodaModel],e=0;return t.forEach((function(r){r||(e+=Math.ceil(100/t.length))})),100<=e&&(e=100),e},chartSeries:function(){var t=[];return this.mnistResult.forEach((function(e){var r=Math.round(1e3*e);r/=10,t.push(r)})),[{data:t}]}},methods:{resetAllCanvas:function(t){t=t&&void 0===t.isTrusted,this.$store.commit("changeScreen");var e=this.getPageColWidth();if(this.currentWidth!==e||t){var r=this.$store.state.isMobile;this.currentWidth=e,this.chartHeight=r?e:.5*e,this.$refs.freeCanvas.resetMyCanvas(this.getFreeCanvasWidth()),this.$refs.imageCanvas.resetMyCanvas(e,this.selectedImg)}},clearFreeCanvas:function(){this.$refs.freeCanvas.resetMyCanvas(this.getFreeCanvasWidth()),this.mnistResult=[0,0,0,0,0,0,0,0,0,0]},getFreeCanvasWidth:function(){var t=this.$store.state.isMobile?10:30,e=this.$refs.freeCanvasContainer,r=e?e.clientWidth-t:330,n=this.getPageColWidth()-t;return Math.min(r,n)},getPageColWidth:function(){var t=window.innerWidth-60,e=this.$refs.pageColumn;if(e){var r=e.clientWidth;return Math.min(t,r)}},loadAllModels:function(){this.loadImgModel(),this.loadMnistModel(),this.loadHosodaModel()},loadImgModel:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t).imgClassifier){e.next=8;break}return o=r(971),e.next=5,o.load();case 5:c=e.sent,n.$store.commit("saveImgClassifier",c),n.changeProgressLoader(n.modelLoadedProgress);case 8:case"end":return e.stop()}}),e)})))()},loadMnistModel:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var path,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:path=t.mnistModelPath,r=t,O.c(path).then((function(t){r.mnistClassifier=t,r.changeProgressLoader(r.modelLoadedProgress)}));case 3:case"end":return e.stop()}}),e)})))()},loadHosodaModel:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var path,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:path=t.cartoonModelPath.hosoda,r=t,O.b(path).then((function(t){r.hosodaModel=t,r.changeProgressLoader(r.modelLoadedProgress)}));case 3:case"end":return e.stop()}}),e)})))()},fileBtnClick:function(){this.$refs.input.click()},changeImage:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.$refs.input.files[0],t.selectedImg=URL.createObjectURL(r),t.$refs.imageCanvas.resetMyCanvas(t.getPageColWidth(),t.selectedImg);case 3:case"end":return e.stop()}}),e)})))()},selectImgFromAsset:function(t){this.selectedImg=this.imgItems[t].img,this.$refs.imageCanvas.resetMyCanvas(this.getPageColWidth(),this.selectedImg)},triggerImageClassifier:function(){this.showProgressLoader("Classifying Image...");var t=this;setTimeout((function(){return t.classifyImage()}),100)},classifyImage:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,n=null,e.prev=2,o=t.$refs.imageCanvas.getImageData(),e.next=6,t.imgClassifier.classify(o);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0=e.t0;case 12:t.showImageClassifyResult(r,n);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()},showImageClassifyResult:function(t,e){if(this.changeProgressLoader(100),t)console.log(t),alert("Error");else if(e){var r={xaxis:{categories:[]},yaxis:{min:0,max:100},dataLabels:{},theme:{mode:"dark"}},n=[{name:"Img Classifier Result",data:[]}],o=this.$store.state.isMobile;e.forEach((function(t){var label=o?t.className.split(",")[0]:t.className;r.xaxis.categories.push(label);var e=Math.round(100*t.probability);n[0].data.push(e)}));var c=this.$store.state.isMobile?400:500,l=function(t){return t+"%"};r.yaxis.labels={formatter:l},r.dataLabels={formatter:l};var h={options:r,series:n,height:c};this.$refs.mlResultDialog.showDialog(h)}else alert("Unexpected Error")},triggerDigitRecognizer:function(){this.showProgressLoader("Processing...");var t=this;setTimeout((function(){return t.recognizeDigit()}),100)},recognizeDigit:function(){var t=this.$refs.freeCanvas.getImageData(),e=this.mnistClassifier,r=O.f((function(){var input=O.a.fromPixels(t,1).toFloat();return input=(input=input.div(O.e(255))).expandDims(),e.predict(input)}));this.mnistResult=this.convertScoreToResult(r),this.changeProgressLoader(100)},convertScoreToResult:function(t){var e=[];return(Array.isArray(t)?t[0].dataSync():t.dataSync()).forEach((function(t){return e.push(t)})),e},generateCartoonImage:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.showProgressLoader("Generating Cartoon Image..."),r=t.$refs.imageCanvas.getImageData(),n=t.hosodaModel,o=t.getPageColWidth(),c=O.f((function(){var img=O.a.fromPixels(r).resizeBilinear([o,o]);if(img.shape[0]!==o||img.shape[1]!==o)throw new Error("Input size should be ".concat(o,"*").concat(o," but ").concat(img.shape," is found"));if(3!==img.shape[2])throw new Error("Input color channel number should be 3 but ".concat(img.shape[2]," is found"));img=img.sub(127.5).div(127.5).reshape([1,o,o,3]);var t=O.d([o,o,1]).tile([1,1,1]).mul(255),e=n.predict(img);return(e=e.add(1).mul(127.5).reshape([o,o,3]).floor()).concat(t,2).cast("int32")})),e.next=7,F.generatedImageResult(c);case 7:l=e.sent,console.log(l),t.changeProgressLoader(100);case 10:case"end":return e.stop()}}),e)})))()},showProgressLoader:function(t){this.$refs.progressCircularDialog.showDialog(t)},changeProgressLoader:function(t){this.$refs.progressCircularDialog.changeProgress(t),100===t&&this.closeProgressLoader()},closeProgressLoader:function(){var t=this.$refs.progressCircularDialog;setTimeout((function(){return t.closeDialog()}),500)}},mounted:function(){window.addEventListener("resize",this.resetAllCanvas),this.resetAllCanvas(!0),this.showProgressLoader("Loading Machine Learning Models..."),this.loadAllModels(),100===this.modelLoadedProgress&&this.closeProgressLoader()},beforeDestroy:function(){window.removeEventListener("resize",this.resetAllCanvas)},watch:{modelLoadedProgress:function(){100===this.modelLoadedProgress&&this.closeProgressLoader()}},components:{FreeCanvas:w.default,ImageCanvas:x.default,MlResultDialog:k.default,ProgressCircularDialog:W.default}},H=r(81),component=Object(H.a)(N,(function(){var t=this,e=t._self._c;return e(c.a,{attrs:{fluid:""}},[e(C.a,{attrs:{justify:"center",align:"center"}},[e("span",{staticClass:"text-h5 text-primary font-weight-bold"},[t._v("MNIST Digit Classification")])]),t._v(" "),e(C.a,{attrs:{justify:"center",align:"center"}},[e(o.a,{ref:"pageColumn",staticClass:"mb-1 pb-0",attrs:{cols:"12",sm:"8"}},[e(n.a,{attrs:{color:"red"},on:{click:t.clearFreeCanvas}},[t._v("Clear")]),t._v(" "),e(n.a,{attrs:{color:"primary"},on:{click:t.triggerDigitRecognizer}},[t._v("Predict")]),t._v("\n      Draw a digit 0-9 "),e("span",{style:t.$store.state.isMobile?"display:none":""},[t._v("and click Predict")])],1)],1),t._v(" "),e(C.a,{attrs:{justify:"center",align:"center"}},[e(o.a,{ref:"freeCanvasContainer",staticClass:"mr-1 bg-white",attrs:{cols:"12",sm:"3",justify:"center",align:"center"}},[e("FreeCanvas",{ref:"freeCanvas"})],1),t._v(" "),e(o.a,{staticClass:"mt-2 ml-1",attrs:{cols:"12",sm:"5"}},[e("apexchart",{attrs:{type:"bar",height:t.chartHeight,options:t.chartOptions,series:t.chartSeries}})],1)],1),t._v(" "),e(l.a),t._v(" "),e(C.a,{attrs:{justify:"center",align:"center"}},[e("span",{staticClass:"text-h5 text-info font-weight-bold"},[t._v("Image Classification")])]),t._v(" "),e(C.a,{attrs:{justify:"center",align:"center"}},[e(o.a,{attrs:{cols:"12",sm:"8"}},[e(_.a,{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,c=r.attrs;return[e(n.a,t._g(t._b({staticClass:"mr-1 px-0",attrs:{color:"primary"},on:{click:t.fileBtnClick}},"v-btn",c,!1),o),[e(h.a,{attrs:{large:""}},[t._v("mdi-camera-image")])],1)]}}])},[t._v(" "),e("span",[t._v("Select Image")])]),t._v(" "),e(v.a,{attrs:{"open-on-hover":"",bottom:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,c=r.attrs;return[e(n.a,t._g(t._b({staticClass:"mr-3 px-0",attrs:{color:"primary"}},"v-btn",c,!1),o),[e(h.a,{attrs:{large:""}},[t._v("mdi-image-search")])],1)]}}])},[t._v(" "),e(d.a,t._l(t.imgItems,(function(r,n){return e(f.a,{key:n,on:{click:function(e){return t.selectImgFromAsset(n)}}},[e(m.c,[e(h.a,{staticClass:"mr-1"},[t._v(t._s(r.icon))]),t._v(t._s(r.title)+"\n            ")],1)],1)})),1)],1),t._v(" "),e(_.a,{attrs:{top:"",color:"info"},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,c=r.attrs;return[e(n.a,t._g(t._b({staticClass:"mr-1 px-0",attrs:{color:"info"},on:{click:t.triggerImageClassifier}},"v-btn",c,!1),o),[e(h.a,{attrs:{large:""}},[t._v("mdi-robot")])],1)]}}])},[t._v(" "),e("span",[t._v("Classify Image")])]),t._v(" "),e(_.a,{attrs:{top:"",color:"cyan"},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,c=r.attrs;return[e(n.a,t._g(t._b({staticClass:"mr-1 px-0",staticStyle:{display:"none"},attrs:{color:"cyan"},on:{click:t.generateCartoonImage}},"v-btn",c,!1),o),[e(h.a,{attrs:{large:""}},[t._v("mdi-robot")])],1)]}}])},[t._v(" "),e("span",[t._v("Cartoon Image")])])],1)],1),t._v(" "),e(C.a,{staticClass:"mt-0",attrs:{justify:"center",align:"center"}},[e(o.a,{staticClass:"mt-0",attrs:{cols:"12",sm:"8"}},[e("ImageCanvas",{ref:"imageCanvas"})],1)],1),t._v(" "),e("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg, image/jpg, image/png"},on:{change:function(e){return t.changeImage()}}}),t._v(" "),e("MlResultDialog",{ref:"mlResultDialog"}),t._v(" "),e("ProgressCircularDialog",{ref:"progressCircularDialog"})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FreeCanvas:r(783).default,ImageCanvas:r(784).default,MlResultDialog:r(785).default,ProgressCircularDialog:r(637).default})},637:function(t,e,r){"use strict";r.r(e);var n=r(257),o=r(542),c=r(539),l=r(256),h=r(536),d=(r(36),{name:"ProgressCircularDialog",props:{val:{type:Number,required:!1,default:0},color:{type:String,required:!1,default:"teal"}},data:function(){return{dialog:!1,value:0,loadingTxt:"Loading..."}},computed:{showValue:function(){return this.val<this.value?this.value:this.val}},methods:{showDialog:function(t){this.value=0,this.loadingTxt=t||"Loading...",this.dialog=!0},changeProgress:function(t){this.value=t},closeDialog:function(){this.dialog=!1}}}),f=r(81),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e(c.a,{attrs:{persistent:"","max-width":t.$store.state.isMobile?2e3:300},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(n.a,[e(o.a,[e(h.a,{attrs:{align:"center",justify:"center"}},[e(l.a,{attrs:{rotate:-90,width:15,size:100,value:t.showValue,color:t.color}},[t._v("\n          "+t._s(t.showValue)+"\n        ")])],1),t._v(" "),e(h.a,{attrs:{align:"center",justify:"center"}},[t._v("\n        "+t._s(t.loadingTxt)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},783:function(t,e,r){"use strict";r.r(e);var n=r(669),o={name:"FreeCanvas",data:function(){return{sketch:null,isCreated:!1,writingMode:!1,canvasProps:{bgColor:"black",stColor:"white",stWeight:8,size:400}}},methods:{setup:function(t){this.sketch=t},resetMyCanvas:function(t){t||(t=this.canvasProps.size),this.isCreated?this.sketch.resizeCanvas(t,t):this.sketch.createCanvas(t,t),this.sketch.background(this.canvasProps.bgColor),this.sketch.stroke(this.canvasProps.stColor),this.sketch.strokeWeight(this.canvasProps.stWeight),this.isCreated=!0,this.canvasProps.size=t},draw:function(){var t=this.sketch;t.mouseIsPressed||this.writingMode?t.line(t.pmouseX,t.pmouseY,t.mouseX,t.mouseY):this.writingMode=!1},touchStarted:function(){this.writingMode=!0,this.draw(this.sketch)},getImageData:function(){var t=this.sketch.get();return t.resize(28,28),t.drawingContext.getImageData(0,0,28,28)}},components:{"vue-p5":r.n(n).a}},c=r(81),component=Object(c.a)(o,(function(){var t=this;return(0,t._self._c)("vue-p5",t._g({staticClass:"no-touch-action"},{setup:t.setup,draw:t.draw,touchStarted:t.touchStarted}))}),[],!1,null,null,null);e.default=component.exports},784:function(t,e,r){"use strict";r.r(e);var n=r(669),o={name:"ImageCanvas",data:function(){return{sketch:null,isCreated:!1,currentSize:400}},methods:{setup:function(t){this.sketch=t},resetMyCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1?arguments[1]:void 0;this.currentSize=t,this.isCreated?this.sketch.resizeCanvas(t,t):this.sketch.createCanvas(t,t),e&&this.loadMyImage(e)},loadMyImage:function(img){this.sketch.loadImage(img,this.showMyImage)},showMyImage:function(t){this.sketch.image(t,0,0,this.currentSize,this.currentSize)},getImageData:function(){var t=this.sketch.get(),e=this.currentSize;return t.drawingContext.getImageData(0,0,e,e)}},components:{"vue-p5":r.n(n).a}},c=o,l=r(81),component=Object(l.a)(c,(function(){var t=this;return(0,t._self._c)("vue-p5",t._g({},{setup:t.setup}))}),[],!1,null,null,null);e.default=component.exports},785:function(t,e,r){"use strict";r.r(e);var n=r(257),o=r(122),c=r(542),l=r(539),h=r(253),d=r(80),f=(r(66),{name:"ImgClassDialog",data:function(){return{dialog:!1,chartData:{}}},computed:{maxWidth:function(){return this.$store.state.isMobile?2e3:1e3}},methods:{showDialog:function(t){this.chartData={options:{},series:[],height:t.height},this.dialog=!0;var e=this;setTimeout((function(){return e.chartData=t}),300)}}}),m=r(81),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(l.a,{attrs:{transition:"dialog-bottom-transition","max-width":t.$store.state.isMobile?2e3:900},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(n.a,[e(d.a,{attrs:{color:"info",dark:""}},[e(h.a,{staticClass:"mx-1",attrs:{large:""}},[t._v("mdi-robot")]),t._v(" "),e("span",{staticClass:"text-h6 my-auto"},[t._v("Image Classfier Result")])],1),t._v(" "),e(o.b,[e(c.a,{attrs:{fluid:""}},[e("apexchart",{attrs:{type:"bar",options:t.chartData.options,series:t.chartData.series,height:t.chartData.height}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},927:function(t,e,r){t.exports=r.p+"img/bird.51c0b2d.jpg"},928:function(t,e,r){t.exports=r.p+"img/jack.682754e.png"},929:function(t,e,r){t.exports=r.p+"img/MrBubz.906ccab.jpg"},930:function(t,e,r){t.exports=r.p+"img/kitten.f931c5c.jpg"},931:function(t,e,r){t.exports=r.p+"img/neko.2897539.png"},936:function(t,e){},937:function(t,e){},945:function(t,e){},966:function(t,e){},969:function(t,e){},970:function(t,e){}}]);